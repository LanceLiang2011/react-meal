{"ast":null,"code":"var _jsxFileName = \"/home/lance/Documents/Software/appProject/React-The Complete Guide/ReactMeals/01-starting-project/src/contexts/CartListContext.jsx\",\n  _s = $RefreshSig$();\nimport { createContext, useReducer } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const CartListContext = /*#__PURE__*/createContext({\n  items: [],\n  totalAmount: 0,\n  addItem: item => null,\n  removeItem: item => null\n});\nconst itemsReducer = (state, action) => {\n  switch (action.type) {\n    case \"ADD\":\n      {\n        const foundItem = state.find(item => item.id === action.item.id);\n        if (foundItem) {\n          // console.log(foundItem);\n          return state.map(item => {\n            if (item.id === action.item.id) {\n              return {\n                ...item,\n                amount: action.item.amount + foundItem.amount\n              };\n            } else {\n              return item;\n            }\n          });\n        }\n        return [action.item, ...state];\n      }\n    case \"REMOVE\":\n      {\n        const foundItem = state.find(item => item.id === action.id);\n        if (foundItem.amount === 1) {\n          return state.filter(item => item.id !== action.id);\n        }\n        return state.map(item => {\n          if (item.id === action.id) {\n            return {\n              ...item,\n              amount: item.amount - 1\n            };\n          } else {\n            return item;\n          }\n        });\n      }\n    default:\n      {\n        return state;\n      }\n  }\n};\nconst CartListContextProvider = _ref => {\n  _s();\n  let {\n    children\n  } = _ref;\n  const [items, dispatch] = useReducer(itemsReducer, []);\n  console.log(items);\n  const totalAmount = items.reduce((acc, cur) => acc + Number(cur.amount), 0);\n  const addItem = item => {\n    dispatch({\n      type: \"ADD\",\n      item\n    });\n  };\n  const removeItem = id => {\n    dispatch({\n      type: \"REMOVE\",\n      id\n    });\n  };\n  return /*#__PURE__*/_jsxDEV(CartListContext.Provider, {\n    value: {\n      items,\n      totalAmount,\n      addItem,\n      removeItem\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n};\n_s(CartListContextProvider, \"/bIIGHqz3JQN3+P2w+HGOngUM7M=\");\n_c = CartListContextProvider;\nexport default CartListContextProvider;\nvar _c;\n$RefreshReg$(_c, \"CartListContextProvider\");","map":{"version":3,"names":["createContext","useReducer","CartListContext","items","totalAmount","addItem","item","removeItem","itemsReducer","state","action","type","foundItem","find","id","map","amount","filter","CartListContextProvider","children","dispatch","console","log","reduce","acc","cur","Number"],"sources":["/home/lance/Documents/Software/appProject/React-The Complete Guide/ReactMeals/01-starting-project/src/contexts/CartListContext.jsx"],"sourcesContent":["import { createContext, useReducer } from \"react\";\n\nexport const CartListContext = createContext({\n  items: [],\n  totalAmount: 0,\n  addItem: (item) => null,\n  removeItem: (item) => null,\n});\n\nconst itemsReducer = (state, action) => {\n  switch (action.type) {\n    case \"ADD\": {\n      const foundItem = state.find((item) => item.id === action.item.id);\n      if (foundItem) {\n        // console.log(foundItem);\n        return state.map((item) => {\n          if (item.id === action.item.id) {\n            return { ...item, amount: action.item.amount + foundItem.amount };\n          } else {\n            return item;\n          }\n        });\n      }\n      return [action.item, ...state];\n    }\n    case \"REMOVE\": {\n      const foundItem = state.find((item) => item.id === action.id);\n      if (foundItem.amount === 1) {\n        return state.filter((item) => item.id !== action.id);\n      }\n      return state.map((item) => {\n        if (item.id === action.id) {\n          return { ...item, amount: item.amount - 1 };\n        } else {\n          return item;\n        }\n      });\n    }\n    default: {\n      return state;\n    }\n  }\n};\n\nconst CartListContextProvider = ({ children }) => {\n  const [items, dispatch] = useReducer(itemsReducer, []);\n  console.log(items);\n  const totalAmount = items.reduce((acc, cur) => acc + Number(cur.amount), 0);\n  const addItem = (item) => {\n    dispatch({ type: \"ADD\", item });\n  };\n  const removeItem = (id) => {\n    dispatch({ type: \"REMOVE\", id });\n  };\n\n  return (\n    <CartListContext.Provider\n      value={{ items, totalAmount, addItem, removeItem }}\n    >\n      {children}\n    </CartListContext.Provider>\n  );\n};\n\nexport default CartListContextProvider;\n"],"mappings":";;AAAA,SAASA,aAAa,EAAEC,UAAU,QAAQ,OAAO;AAAC;AAElD,OAAO,MAAMC,eAAe,gBAAGF,aAAa,CAAC;EAC3CG,KAAK,EAAE,EAAE;EACTC,WAAW,EAAE,CAAC;EACdC,OAAO,EAAGC,IAAI,IAAK,IAAI;EACvBC,UAAU,EAAGD,IAAI,IAAK;AACxB,CAAC,CAAC;AAEF,MAAME,YAAY,GAAG,CAACC,KAAK,EAAEC,MAAM,KAAK;EACtC,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAK,KAAK;MAAE;QACV,MAAMC,SAAS,GAAGH,KAAK,CAACI,IAAI,CAAEP,IAAI,IAAKA,IAAI,CAACQ,EAAE,KAAKJ,MAAM,CAACJ,IAAI,CAACQ,EAAE,CAAC;QAClE,IAAIF,SAAS,EAAE;UACb;UACA,OAAOH,KAAK,CAACM,GAAG,CAAET,IAAI,IAAK;YACzB,IAAIA,IAAI,CAACQ,EAAE,KAAKJ,MAAM,CAACJ,IAAI,CAACQ,EAAE,EAAE;cAC9B,OAAO;gBAAE,GAAGR,IAAI;gBAAEU,MAAM,EAAEN,MAAM,CAACJ,IAAI,CAACU,MAAM,GAAGJ,SAAS,CAACI;cAAO,CAAC;YACnE,CAAC,MAAM;cACL,OAAOV,IAAI;YACb;UACF,CAAC,CAAC;QACJ;QACA,OAAO,CAACI,MAAM,CAACJ,IAAI,EAAE,GAAGG,KAAK,CAAC;MAChC;IACA,KAAK,QAAQ;MAAE;QACb,MAAMG,SAAS,GAAGH,KAAK,CAACI,IAAI,CAAEP,IAAI,IAAKA,IAAI,CAACQ,EAAE,KAAKJ,MAAM,CAACI,EAAE,CAAC;QAC7D,IAAIF,SAAS,CAACI,MAAM,KAAK,CAAC,EAAE;UAC1B,OAAOP,KAAK,CAACQ,MAAM,CAAEX,IAAI,IAAKA,IAAI,CAACQ,EAAE,KAAKJ,MAAM,CAACI,EAAE,CAAC;QACtD;QACA,OAAOL,KAAK,CAACM,GAAG,CAAET,IAAI,IAAK;UACzB,IAAIA,IAAI,CAACQ,EAAE,KAAKJ,MAAM,CAACI,EAAE,EAAE;YACzB,OAAO;cAAE,GAAGR,IAAI;cAAEU,MAAM,EAAEV,IAAI,CAACU,MAAM,GAAG;YAAE,CAAC;UAC7C,CAAC,MAAM;YACL,OAAOV,IAAI;UACb;QACF,CAAC,CAAC;MACJ;IACA;MAAS;QACP,OAAOG,KAAK;MACd;EAAC;AAEL,CAAC;AAED,MAAMS,uBAAuB,GAAG,QAAkB;EAAA;EAAA,IAAjB;IAAEC;EAAS,CAAC;EAC3C,MAAM,CAAChB,KAAK,EAAEiB,QAAQ,CAAC,GAAGnB,UAAU,CAACO,YAAY,EAAE,EAAE,CAAC;EACtDa,OAAO,CAACC,GAAG,CAACnB,KAAK,CAAC;EAClB,MAAMC,WAAW,GAAGD,KAAK,CAACoB,MAAM,CAAC,CAACC,GAAG,EAAEC,GAAG,KAAKD,GAAG,GAAGE,MAAM,CAACD,GAAG,CAACT,MAAM,CAAC,EAAE,CAAC,CAAC;EAC3E,MAAMX,OAAO,GAAIC,IAAI,IAAK;IACxBc,QAAQ,CAAC;MAAET,IAAI,EAAE,KAAK;MAAEL;IAAK,CAAC,CAAC;EACjC,CAAC;EACD,MAAMC,UAAU,GAAIO,EAAE,IAAK;IACzBM,QAAQ,CAAC;MAAET,IAAI,EAAE,QAAQ;MAAEG;IAAG,CAAC,CAAC;EAClC,CAAC;EAED,oBACE,QAAC,eAAe,CAAC,QAAQ;IACvB,KAAK,EAAE;MAAEX,KAAK;MAAEC,WAAW;MAAEC,OAAO;MAAEE;IAAW,CAAE;IAAA,UAElDY;EAAQ;IAAA;IAAA;IAAA;EAAA,QACgB;AAE/B,CAAC;AAAC,GAlBID,uBAAuB;AAAA,KAAvBA,uBAAuB;AAoB7B,eAAeA,uBAAuB;AAAC;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}